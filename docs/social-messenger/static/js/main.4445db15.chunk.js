(this.webpackJsonpmessaging=this.webpackJsonpmessaging||[]).push([[0],{322:function(e,a,t){e.exports=t(708)},697:function(e,a,t){},698:function(e,a,t){},699:function(e,a,t){},700:function(e,a,t){},701:function(e,a,t){},702:function(e,a,t){},703:function(e,a,t){e.exports=t.p+"static/media/stream.ce7bf370.png"},704:function(e,a,t){},705:function(e,a,t){},706:function(e,a,t){},707:function(e,a,t){},708:function(e,a,t){"use strict";t.r(a);t(323),t(335);var n=t(0),r=t.n(n),l=t(45),s=t.n(l),i=t(33),c=t(30),o=t(9);const m=(e,a)=>{Object(n.useEffect)(()=>{const t=(n=a,e=>{window.parent.postMessage(e,n)});var n;const r=({type:e,message:a})=>{switch(e){case"reaction.new":t("react-to-message");break;case"message.new":if("giphy"===a.command){t("run-giphy");break}if(a.attachments.length){if("video"===a.attachments[0].type&&"https://youtu.be/Ujvy-DEA-UM"===a.attachments[0].og_scrape_url){t("send-youtube");break}if("image"===a.attachments[0].type){t("drag-drop-image");break}}if(a.parent_id){t("start-thread");break}t("send-message")}};return e&&e.on(r),()=>null===e||void 0===e?void 0:e.off(r)},[e,a])};t(696),t(697);var u=t(46),d=t.n(u),p=t(68),g=t(81),v=t.n(g);const h=({isEditing:e,setIsEditing:a})=>r.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{cursor:"pointer",marginLeft:"16px"},onClick:()=>{e||a(!0)}},r.a.createElement("path",{d:"M12 2C17.52 2 22 6.48 22 12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12C2 6.48 6.48 2 12 2Z",fill:"#858688"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 8L13 6H11V8H13ZM13 10H11V18H13V10Z",fill:"white"})),E=()=>r.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{cursor:"pointer",marginLeft:"16px"}},r.a.createElement("path",{d:"M12 2C17.52 2 22 6.48 22 12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12C2 6.48 6.48 2 12 2Z",fill:"#858688"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.3875 7.73454C15.9092 7.4584 15.2977 7.62228 15.0215 8.10057L11.3573 14.4472L8.62166 11.7116C8.23113 11.3211 7.59797 11.3211 7.20744 11.7116C6.81692 12.1022 6.81692 12.7353 7.20744 13.1259L10.8123 16.7307C10.8303 16.7487 10.8488 16.7658 10.8677 16.7821C10.9278 16.8418 10.9965 16.8948 11.0732 16.9392C11.5515 17.2153 12.1631 17.0514 12.4393 16.5731L16.7536 9.10057C17.0297 8.62228 16.8658 8.01069 16.3875 7.73454Z",fill:"white"})),f=({closeThread:e})=>r.a.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:a=>e(a),style:{cursor:"pointer",marginRight:"10px"}},r.a.createElement("path",{d:"M0 20C0 8.95431 8.95431 0 20 0C31.0457 0 40 8.95431 40 20C40 31.0457 31.0457 40 20 40C8.95431 40 0 31.0457 0 20Z",fill:"#3E3E41"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.5625 25.4416L22.1208 20L27.5625 14.5583C28.15 13.9708 28.15 13.025 27.5625 12.4375C26.975 11.85 26.0291 11.85 25.4416 12.4375L20 17.8791L14.5583 12.4375C13.9708 11.85 13.025 11.85 12.4375 12.4375C11.85 13.025 11.85 13.9708 12.4375 14.5583L17.8791 20L12.4375 25.4416C11.85 26.0291 11.85 26.975 12.4375 27.5625C13.025 28.15 13.9708 28.15 14.5583 27.5625L20 22.1208L25.4416 27.5625C26.0291 28.15 26.975 28.15 27.5625 27.5625C28.1458 26.975 28.1458 26.025 27.5625 25.4416Z",fill:"#E9E9EA"})),_=()=>r.a.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 17.9708H0V13.7278L13.435 0.292787C13.8255 -0.0975955 14.4585 -0.0975955 14.849 0.292787L17.678 3.12179C18.0684 3.51229 18.0684 4.14529 17.678 4.53579L6.243 15.9708H18V17.9708ZM2 15.9708H3.414L12.728 6.65679L11.314 5.24279L2 14.5568V15.9708ZM15.556 3.82879L14.142 5.24279L12.728 3.82879L14.142 2.41479L15.556 3.82879Z",fill:"#E9E9EA"})),w=()=>r.a.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",null,r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2ZM0 10C0 4.47715 4.47715 0 10 0C15.5228 0 20 4.47715 20 10C20 15.5228 15.5228 20 10 20C4.47715 20 0 15.5228 0 10Z"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 7.5C9 8.32843 8.32843 9 7.5 9C6.67157 9 6 8.32843 6 7.5C6 6.67157 6.67157 6 7.5 6C8.32843 6 9 6.67157 9 7.5Z"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 7.5C14 8.32843 13.3284 9 12.5 9C11.6716 9 11 8.32843 11 7.5C11 6.67157 11.6716 6 12.5 6C13.3284 6 14 6.67157 14 7.5Z"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.42662 11.1808C5.87907 10.8641 6.5026 10.9741 6.81932 11.4266C7.30834 12.1252 8.21252 12.9219 9.29096 13.1459C10.275 13.3503 11.6411 13.1262 13.2568 11.3311C13.6263 10.9206 14.2585 10.8873 14.6691 11.2567C15.0796 11.6262 15.1128 12.2585 14.7434 12.669C12.759 14.8738 10.7085 15.4831 8.88421 15.1041C7.15432 14.7448 5.8585 13.5415 5.18085 12.5735C4.86414 12.121 4.97417 11.4975 5.42662 11.1808Z"}))),b=()=>r.a.createElement("svg",{width:"6",height:"12",viewBox:"0 0 6 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M2.75749 0.666626H5.66659L3.72719 4.54541H5.66659L2.03022 11.3333L2.75749 6.48481H0.333252L2.75749 0.666626Z",fill:"white"})),C=()=>r.a.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 10C20 4.48 15.52 0 10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10ZM6 9H10V6L14 10L10 14V11H6V9Z",fill:"white"})),j=()=>r.a.createElement("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.72472 8.39971L6.325 5L9.72472 1.60029C10.0918 1.23324 10.0918 0.642327 9.72472 0.275283C9.35767 -0.091761 8.76676 -0.091761 8.39971 0.275283L5 3.675L1.60029 0.275283C1.23324 -0.091761 0.642327 -0.091761 0.275283 0.275283C-0.091761 0.642327 -0.091761 1.23324 0.275283 1.60029L3.675 5L0.275283 8.39971C-0.091761 8.76676 -0.091761 9.35767 0.275283 9.72472C0.642327 10.0918 1.23324 10.0918 1.60029 9.72472L5 6.325L8.39971 9.72472C8.76676 10.0918 9.35767 10.0918 9.72472 9.72472C10.0892 9.35767 10.0892 8.76415 9.72472 8.39971Z",fill:"white"})),O=["https://randomuser.me/api/portraits/women/47.jpg","https://randomuser.me/api/portraits/women/57.jpg","https://randomuser.me/api/portraits/women/50.jpg","https://randomuser.me/api/portraits/women/85.jpg","https://randomuser.me/api/portraits/women/89.jpg","https://randomuser.me/api/portraits/women/51.jpg","https://randomuser.me/api/portraits/women/28.jpg","https://randomuser.me/api/portraits/women/2.jpg","https://randomuser.me/api/portraits/women/40.jpg","https://randomuser.me/api/portraits/women/21.jpg","https://randomuser.me/api/portraits/women/4.jpg","https://randomuser.me/api/portraits/women/64.jpg","https://randomuser.me/api/portraits/men/43.jpg","https://randomuser.me/api/portraits/men/7.jpg","https://randomuser.me/api/portraits/men/82.jpg","https://randomuser.me/api/portraits/men/91.jpg","https://randomuser.me/api/portraits/men/17.jpg","https://randomuser.me/api/portraits/men/1.jpg","https://randomuser.me/api/portraits/men/26.jpg","https://randomuser.me/api/portraits/men/53.jpg","https://randomuser.me/api/portraits/men/21.jpg","https://randomuser.me/api/portraits/men/77.jpg","https://randomuser.me/api/portraits/men/58.jpg","https://randomuser.me/api/portraits/men/81.jpg"];t(698);const x=({user:e})=>r.a.createElement("li",{className:"messaging-create-channel__user-result"},r.a.createElement(o.a,{image:e.image,size:40}),e.online&&r.a.createElement("div",{className:"messaging-create-channel__user-result-online"}),r.a.createElement("div",{className:"messaging-create-channel__user-result__details"},r.a.createElement("span",null,e.name)));var N=r.a.memo(({onClose:e})=>{const a=Object(n.useContext)(o.g),t=a.client,l=a.setActiveChannel,s=Object(n.useState)(void 0),c=Object(i.a)(s,2),m=c[0],u=c[1],g=Object(n.useState)(""),h=Object(i.a)(g,2),E=h[0],f=h[1],_=Object(n.useState)(!1),w=Object(i.a)(_,2),b=w[0],C=w[1],O=Object(n.useState)(!1),N=Object(i.a)(O,2),y=N[0],L=N[1],k=Object(n.useState)(!1),M=Object(i.a)(k,2),R=M[0],S=M[1],z=Object(n.useState)([]),I=Object(i.a)(z,2),Z=I[0],q=I[1],U=Object(n.useState)([]),F=Object(i.a)(U,2),H=F[0],B=F[1],T=Object(n.useRef)(),V=()=>{f(""),C(!1),L(!1)};Object(n.useEffect)(()=>{const e=()=>{b&&V()};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]);const P=function(){var e=Object(p.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R){e.next=2;break}return e.abrupt("return");case 2:return S(!0),e.prev=3,e.next=6,t.queryUsers({name:{$autocomplete:E}},{id:1},{limit:6});case 6:(a=e.sent).users.length?(L(!1),B(a.users)):L(!0),C(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log({error:e.t0});case 14:S(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),J=v()(P,100,{trailing:!0});Object(n.useEffect)(()=>{E&&J()},[E]);const A=function(){var a=Object(p.a)(d.a.mark((function a(){var n,r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((n=Z.map(e=>e.id)).length){a.next=3;break}return a.abrupt("return");case 3:return a.next=5,t.channel("messaging",{members:[...n,t.userID]});case 5:return r=a.sent,a.next=8,r.watch();case 8:l(r),q([]),B([]),e();case 12:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),D=e=>{Z.find(a=>a.id===e.id)||(q([...Z,e]),C(!1),f(""),T.current.focus())},X=Object(n.useCallback)(e=>{if(38===e.which&&u(e=>void 0===e?0:0===e?H.length-1:e-1),40===e.which&&u(e=>void 0===e||e===H.length-1?0:e+1),13===e.which&&(e.preventDefault(),void 0!==m))return D(H[m]),u(void 0)},[H,m]);return Object(n.useEffect)(()=>(document.addEventListener("keydown",X,!1),()=>document.removeEventListener("keydown",X)),[X]),r.a.createElement("div",{className:"messaging-create-channel"},r.a.createElement("header",null,r.a.createElement("div",{className:"messaging-create-channel__left"},r.a.createElement("div",{className:"messaging-create-channel__left-text"},"To: "),!!(null===Z||void 0===Z?void 0:Z.length)&&r.a.createElement("div",{className:"messaging-create-channel__users"},Z.map(e=>r.a.createElement("div",{className:"messaging-create-channel__user",onClick:()=>(e=>{const a=Z.filter(a=>a.id!==e.id);q(a),T.current.focus()})(e),key:e.id},r.a.createElement("div",{className:"messaging-create-channel__user-text"},e.name),r.a.createElement(j,null)))),r.a.createElement("form",{onSubmit:D},r.a.createElement("input",{autoFocus:!0,ref:T,value:E,onChange:e=>f(e.target.value),placeholder:Z.length?"":"Start typing for suggestions",type:"text",className:"messaging-create-channel__input"}))),r.a.createElement("button",{className:"create-channel-button",onClick:A},"Start chat")),E&&r.a.createElement("main",null,r.a.createElement("ul",{className:"messaging-create-channel__user-results"},!!(null===H||void 0===H?void 0:H.length)&&!y&&r.a.createElement("div",null,H.map((e,a)=>r.a.createElement("div",{className:"messaging-create-channel__user-result ".concat(m===a&&"focused"),onClick:()=>D(e),key:e.id},r.a.createElement(x,{user:e})))),y&&r.a.createElement("div",{onClick:()=>{T.current.focus(),V()},className:"messaging-create-channel__user-result empty"},"No people found..."))))});t(699);var y=e=>r.a.createElement(r.a.Fragment,null,r.a.createElement(o.k,e));t(700),t(701);const L=()=>{const e=Object(n.useContext)(o.c),a=e.client,t=e.typing;if(!a||!t)return null;const l=Object.values(t).filter(({user:e})=>{var t;return(null===e||void 0===e?void 0:e.id)!==(null===(t=a.user)||void 0===t?void 0:t.id)}).map(({user:e})=>e.name||e.id);let s="";return 1===l.length?s="".concat(l[0]," is typing"):2===l.length?s="".concat(l[0]," and ").concat(l[1]," are typing"):l.length>2&&(s="".concat(l[0]," and ").concat(l.length-1," more are typing")),r.a.createElement("div",{className:"messaging__typing-indicator"},s&&r.a.createElement("div",{className:"dots"},r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"}),r.a.createElement("span",{className:"dot"})),r.a.createElement("div",null,s))};var k=r.a.memo(()=>{var e;const a=Object(n.useContext)(o.c),t=a.channel,l=a.client,s=Object(n.useState)((null===t||void 0===t?void 0:t.data.name)||""),c=Object(i.a)(s,2),m=c[0],u=c[1],g=Object(n.useState)(!1),v=Object(i.a)(g,2),f=v[0],_=v[1],w=Object(n.useState)(""),b=Object(i.a)(w,2),C=b[0],j=b[1],O=Object(n.useRef)(),x=Object.values((null===(e=t.state)||void 0===e?void 0:e.members)||{}).filter(e=>{var a,t;return(null===(a=e.user)||void 0===a?void 0:a.id)!==(null===l||void 0===l||null===(t=l.user)||void 0===t?void 0:t.id)}),N=function(){var e=Object(p.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&a.preventDefault(),!m||m===t.data.name){e.next=4;break}return e.next=4,t.update({name:m},{text:"Channel name changed to ".concat(m)});case 4:_(!1);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();Object(n.useEffect)(()=>{f&&O.current&&O.current.focus()},[f]),Object(n.useEffect)(()=>{m||j(x.map(e=>{var a,t;return(null===(a=e.user)||void 0===a?void 0:a.name)||(null===(t=e.user)||void 0===t?void 0:t.id)||"Unnamed User"}).join(", "))},[m,x]);const y=()=>r.a.createElement("form",{style:{flex:1},onSubmit:e=>{e.preventDefault(),O.current.blur()}},r.a.createElement("input",{autoFocus:!0,className:"channel-header__edit-input",onBlur:N,onChange:e=>u(e.target.value),placeholder:"Type a new name for the chat",ref:O,value:m}));return r.a.createElement("div",{className:"messaging__channel-header"},(e=>{var a,t,n,l,s,i,c,m,u,d;return 1===e.length?r.a.createElement("div",{className:"messaging__channel-header__avatars"},r.a.createElement(o.a,{image:(null===(a=e[0])||void 0===a?void 0:a.user.image)||void 0,size:40}),";"):2===e.length?r.a.createElement("div",{className:"messaging__channel-header__avatars two"},r.a.createElement("span",null,r.a.createElement(o.a,{image:(null===(t=e[0])||void 0===t?void 0:t.user.image)||void 0,shape:"square",size:40})),r.a.createElement("span",null,r.a.createElement(o.a,{image:(null===(n=e[1])||void 0===n?void 0:n.user.image)||void 0,shape:"square",size:40}))):3===e.length?r.a.createElement("div",{className:"messaging__channel-header__avatars three"},r.a.createElement("span",null,r.a.createElement(o.a,{image:(null===(l=e[0])||void 0===l?void 0:l.user.image)||void 0,shape:"square",size:40})),r.a.createElement("span",null,r.a.createElement(o.a,{image:(null===(s=e[1])||void 0===s?void 0:s.user.image)||void 0,shape:"square",size:20}),r.a.createElement(o.a,{image:(null===(i=e[2])||void 0===i?void 0:i.user.image)||void 0,shape:"square",size:20}))):e.length>=4?r.a.createElement("div",{className:"messaging__channel-header__avatars four"},r.a.createElement("span",null,r.a.createElement(o.a,{image:(null===(c=e[0])||void 0===c?void 0:c.user.image)||void 0,shape:"square",size:20}),r.a.createElement(o.a,{image:(null===(m=e[1])||void 0===m?void 0:m.user.image)||void 0,shape:"square",size:20})),r.a.createElement("span",null,r.a.createElement(o.a,{image:(null===(u=e[2])||void 0===u?void 0:u.user.image)||void 0,shape:"square",size:20}),r.a.createElement(o.a,{image:(null===(d=e[3])||void 0===d?void 0:d.user.image)||void 0,shape:"square",size:20}))):null})(x),f?r.a.createElement(y,null):r.a.createElement("div",{className:"channel-header__name"},m||C),r.a.createElement("div",{className:"messaging__channel-header__right"},r.a.createElement(L,null),f?r.a.createElement(E,null):r.a.createElement(h,{isEditing:f,setIsEditing:_})))});t(702);var M=r.a.memo(({children:e,error:a=!1,loading:l,onCreateChannel:s})=>{const i=Object(n.useContext)(o.g),c=i.client,m=i.setActiveChannel,u=c.user||{},g=u.id,v=u.image,h=void 0===v?t(703):v,E=u.name,f=void 0===E?"Example User":E;Object(n.useEffect)(()=>{var a,t;const n=function(){var e=Object(p.a)(d.a.mark((function e(a){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.channel("messaging","first",{name:"Social Demo"});case 2:return t=e.sent,e.next=5,t.addMembers([a.user.id]);case 5:m(t);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();l||(null===e||void 0===e||null===(a=e.props)||void 0===a||null===(t=a.children)||void 0===t?void 0:t.length)||n(c)},[l]);const w=({children:e})=>r.a.createElement("div",{className:"messaging__channel-list"},r.a.createElement("div",{className:"messaging__channel-list__header"},r.a.createElement(o.a,{image:h,name:f,size:40}),r.a.createElement("div",{className:"messaging__channel-list__header__name"},f||g),r.a.createElement("button",{className:"messaging__channel-list__header__button",onClick:s},r.a.createElement(_,null))),e);return a?r.a.createElement(w,null,r.a.createElement("div",{className:"messaging__channel-list__message"},"Error loading conversations, please try again momentarily.")):l?r.a.createElement(w,null,r.a.createElement("div",{className:"messaging__channel-list__message"},"Loading conversations...")):r.a.createElement(w,null,e)});t(704);var R=e=>{const a=e.channel,t=e.latestMessage,l=e.setActiveChannel,s=e.setIsCreating,i=Object(n.useContext)(o.g),c=i.channel,m=i.client,u=Object.values(a.state.members).filter(({user:e})=>e.id!==m.userID);return r.a.createElement("div",{className:(null===a||void 0===a?void 0:a.id)===(null===c||void 0===c?void 0:c.id)?"channel-preview__container selected":"channel-preview__container",onClick:()=>{s(!1),l(a)}},(e=>{var a,t,n,l,s,i,c,m,u,d;return 1===e.length?r.a.createElement(o.a,{image:(null===(a=e[0])||void 0===a?void 0:a.user.image)||void 0,size:40}):2===e.length?r.a.createElement("div",{className:"channel-preview__avatars two"},r.a.createElement("span",null,r.a.createElement(o.a,{image:(null===(t=e[0])||void 0===t?void 0:t.user.image)||void 0,shape:"square",size:40})),r.a.createElement("span",null,r.a.createElement(o.a,{image:(null===(n=e[1])||void 0===n?void 0:n.user.image)||void 0,shape:"square",size:40}))):3===e.length?r.a.createElement("div",{className:"channel-preview__avatars three"},r.a.createElement("span",null,r.a.createElement(o.a,{image:(null===(l=e[0])||void 0===l?void 0:l.user.image)||void 0,shape:"square",size:40})),r.a.createElement("span",null,r.a.createElement(o.a,{image:(null===(s=e[1])||void 0===s?void 0:s.user.image)||void 0,shape:"square",size:20}),r.a.createElement(o.a,{image:(null===(i=e[2])||void 0===i?void 0:i.user.image)||void 0,shape:"square",size:20}))):e.length>=4?r.a.createElement("div",{className:"channel-preview__avatars"},r.a.createElement("span",null,r.a.createElement(o.a,{image:(null===(c=e[0])||void 0===c?void 0:c.user.image)||void 0,shape:"square",size:20}),r.a.createElement(o.a,{image:(null===(m=e[1])||void 0===m?void 0:m.user.image)||void 0,shape:"square",size:20})),r.a.createElement("span",null,r.a.createElement(o.a,{image:(null===(u=e[2])||void 0===u?void 0:u.user.image)||void 0,shape:"square",size:20}),r.a.createElement(o.a,{image:(null===(d=e[3])||void 0===d?void 0:d.user.image)||void 0,shape:"square",size:20}))):null})(u),r.a.createElement("div",{className:"channel-preview__content-wrapper"},r.a.createElement("div",{className:"channel-preview__content-top"},r.a.createElement("p",{className:"channel-preview__content-name"},a.data.name||(e=>{var a,t;var n;return e.length&&1!==e.length?"".concat((null===(a=e[0])||void 0===a?void 0:a.user.name)||"Johnny Blaze",", ").concat((null===(t=e[1])||void 0===t?void 0:t.user.name)||"Johnny Blaze"):(null===(n=e[0])||void 0===n?void 0:n.user.name)||"Johnny Blaze"})(u)),r.a.createElement("p",{className:"channel-preview__content-time"},(e=>{var a,t;let n=null===(a=e.state.last_message_at)||void 0===a?void 0:a.getHours(),r=null===(t=e.state.last_message_at)||void 0===t?void 0:t.getMinutes(),l="AM";return void 0===n||void 0===r?"":(n>12&&(n-=12,l="PM"),0===n&&(n=12),12===n&&(l="PM"),1===r.toString().length&&(r="0".concat(r)),"".concat(n,":").concat(r," ").concat(l))})(a))),r.a.createElement("p",{className:"channel-preview__content-message"},t||"Send a message")))},S=t(69),z=t(25);t(705);const I=({fileOrder:e,fileUploads:a,imageOrder:t,imageUploads:l,numberOfUploads:s,removeFile:i,removeImage:c,uploadFile:m,uploadImage:u,uploadNewFiles:d})=>{const p=Object(n.useContext)(o.c);return r.a.createElement(r.a.Fragment,null,t.length>0&&r.a.createElement(z.e,{imageUploads:t.map(e=>l[e]),handleRemove:c,handleRetry:u,handleFiles:d,multiple:p.multipleUploads,disabled:void 0!==p.maxNumberOfFiles&&s>=p.maxNumberOfFiles}),e.length>0&&r.a.createElement(z.b,{uploads:e.map(e=>a[e]),handleRemove:i,handleRetry:m,handleFiles:d}))},Z=()=>r.a.createElement("div",{className:"giphy-icon__wrapper"},r.a.createElement(b,null),r.a.createElement("p",{className:"giphy-icon__text"},"GIPHY"));var q=r.a.memo(e=>{const a=Object(n.useContext)(o.c),t=a.acceptedFiles,l=a.maxNumberOfFiles,s=a.multipleUploads,m=a.sendMessage,u=Object(n.useState)(!1),d=Object(i.a)(u,2),p=d[0],g=d[1],v=Object(o.n)(Object(S.a)(Object(S.a)({},e),{},{overrideSubmitHandler:e=>{let a;if(e.attachments.length&&e.text.startsWith("/giphy")){const t=e.text.replace("/giphy","");a=Object(S.a)(Object(S.a)({},e),{},{text:t})}if(p){const t="/giphy ".concat(e.text);a=Object(S.a)(Object(S.a)({},e),{},{text:t})}const t=m(a||e);Object(c.c)(t,"send message"),g(!1)}})),h=Object(n.useCallback)(e=>{var a;const t=e.target.value,n="deleteContentBackward"===(null===(a=e.nativeEvent)||void 0===a?void 0:a.inputType);1===v.text.length&&n&&g(!1),p||!v.text.startsWith("/giphy")||v.numberOfUploads||(e.target.value=t.replace("/giphy",""),g(!0)),v.handleChange(e)},[p,v]);return r.a.createElement("div",{className:"str-chat__messaging-input"},r.a.createElement("div",{className:"messaging-input__button",role:"button","aria-roledescription":"button",onClick:v.openEmojiPicker,ref:v.emojiPickerRef},r.a.createElement(w,null)),r.a.createElement(z.d,{accept:t,handleFiles:v.uploadNewFiles,multiple:s,disabled:void 0!==l&&v.numberOfUploads>=l||p},r.a.createElement("div",{className:"messaging-input__input-wrapper"},p&&!v.numberOfUploads&&r.a.createElement(Z,null),r.a.createElement(I,v),r.a.createElement(o.f,{commands:v.getCommands(),innerRef:v.textareaRef,handleSubmit:v.handleSubmit,onSelectItem:v.onSelectItem,onChange:h,value:v.text,rows:1,maxRows:e.maxRows,placeholder:"Send a message",onPaste:v.onPaste,triggers:e.autocompleteTriggers,grow:e.grow,disabled:e.disabled,additionalTextareaProps:e.additionalTextareaProps}))),r.a.createElement("div",{className:"messaging-input__button",role:"button","aria-roledescription":"button",onClick:v.handleSubmit},r.a.createElement(C,null)),r.a.createElement(o.h,v))});t(706);const U=({closeThread:e,thread:a})=>r.a.createElement("div",{className:"custom-thread-header"},r.a.createElement("div",{className:"custom-thread-header__left"},r.a.createElement("p",{className:"custom-thread-header__left-title"},"Thread"),r.a.createElement("p",{className:"custom-thread-header__left-count"},(null===a||void 0===a?void 0:a.reply_count)?1===a.reply_count?"1 reply":"".concat(a.reply_count," Replies"):"")),r.a.createElement(f,{closeThread:e}));var F=()=>r.a.createElement(o.l,{Message:y,MessageInput:q,ThreadHeader:U});t(707);const H=new URLSearchParams(window.location.search),B=H.get("apikey")||"r2ae9jaseu7m",T=H.get("user")||"example-user",V=H.get("user_token")||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZXhhbXBsZS11c2VyIn0.DrTrqcihwnoXWfhxur46cM7hFN9VwAhMFpUy4CFXHzc",P=H.get("target_origin")||"http://localhost:8000",J={type:"messaging",members:{$in:[T]}},A={state:!0,watch:!0,presence:!0,limit:8},D={last_message_at:-1,updated_at:-1,cid:1},X=new c.b(B);X.setUser({id:T,image:(()=>{const e=Math.floor(24*Math.random());return O[e]})()},V);var W=()=>{const e=Object(n.useState)(!1),a=Object(i.a)(e,2),t=a[0],l=a[1],s=Object(n.useState)("dark"),c=Object(i.a)(s,2),u=c[0],d=c[1];return m(X,P),Object(n.useEffect)(()=>{const e=({data:e,origin:a})=>{a===P&&("light"!==e&&"dark"!==e||d(e))};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[]),r.a.createElement("div",null,r.a.createElement(o.e,{client:X,theme:"messaging ".concat(u)},r.a.createElement(o.d,{filters:J,sort:D,options:A,List:e=>r.a.createElement(M,Object.assign({},e,{onCreateChannel:()=>l(!t)})),Preview:e=>r.a.createElement(R,Object.assign({},e,{setIsCreating:l}))}),r.a.createElement(o.b,{maxNumberOfFiles:10,multipleUploads:!0},t&&r.a.createElement(N,{onClose:()=>l(!1)}),r.a.createElement(o.m,null,r.a.createElement(k,null),r.a.createElement(o.j,{Message:y,TypingIndicator:()=>null}),r.a.createElement(o.i,{focus:!0,Input:q})),r.a.createElement(F,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[322,1,2]]]);
//# sourceMappingURL=main.4445db15.chunk.js.map